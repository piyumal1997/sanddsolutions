import{r as x,j as e,F as l,y as H,z as J,A as k,B as M,C as Q,D as V,E as X,G as Z,L as ee}from"./index-BmmDSopB.js";import{S as te}from"./sweetalert2.esm.all-CHfsb5jC.js";const se=()=>{const[i,L]=x.useState(5e3),[f,B]=x.useState("single"),[m,A]=x.useState("financed"),[w,F]=x.useState(5),[S,W]=x.useState(11),[n,D]=x.useState(null),C={5:75e4,10:154e4,15:205e4,20:236e4,30:335e4,40:396e4},T=t=>t<5?20.9:t<=20?19.61:t<=100?17.46:t<=500?15.49:t<=1e3?15.07:14.46,U=t=>{if(t<=0)return 0;let s=0;return t<=60?(s+=Math.min(t,30)*4.5,t>30&&(s+=(t-30)*8)):(s+=60*12.75,t>60&&(s+=Math.min(t-60,30)*18.5),t>90&&(s+=Math.min(t-90,30)*24.5),t>120&&(s+=Math.min(t-120,60)*41),t>180&&(s+=(t-180)*61)),Math.round(s)},Y=t=>t<=30?80:t<=60?210:t<=90?400:t<=120?1e3:t<=180?1500:2100,p=t=>{const s=U(t),c=Y(t);return Math.round(s+c)},G=t=>{if(t<5e3)return 80;let s=0,c=1/0;for(let a=30;a<=1200;a+=.5){const r=p(Math.round(a)),d=Math.abs(r-t);if(d<c&&(c=d,s=Math.round(a)),r>t+3e3)break}let u=s;for(let a=Math.max(0,s-10);a<=s+10;a++)Math.abs(p(a)-t)<Math.abs(p(u)-t)&&(u=a);return u},K=()=>{if(isNaN(i)||i<5e3){te.fire({icon:"error",title:"Invalid Input",text:"Please enter a valid monthly bill of at least 5,000 LKR."});return}const t=125,s=G(i),c=Math.ceil(s/t);let a=Object.keys(C).map(Number).sort((o,g)=>o-g).find(o=>o>=c)||40;const r=C[a],d=Math.round(a*t),O=Math.max(0,s-d),P=Math.max(0,d-s),_=p(O),E=T(a),N=P*E,$=Math.max(0,_-N),R=i-$+N,I=R*12,q=I>0?(r/I).toFixed(1):"N/A",z=f==="single"?"Single Phase":"Three Phase";let b="";a>5&&f==="single"?b=`A ${a} kW system requires a three-phase connection for net metering compliance and optimal performance in Sri Lanka. Single-phase is limited to 5 kW.`:a>5?b=`The selected ${a} kW package is suitable for three-phase connection.`:b="A 5 kW system is generally compatible with single-phase connections.";const y={estimatedUnits:s.toLocaleString()+" units",theoreticalKw:c+" kW",recommendedPackage:a+" kW",generation:d.toLocaleString()+" units",excessUnits:P.toLocaleString()+" units",exportRate:E.toFixed(2)+" LKR/unit",monthlyNetIncome:"Rs. "+Math.round(N).toLocaleString(),costDisplay:"Rs. "+r.toLocaleString(),paybackDisplay:q+" years",phaseDisplay:z,phaseNote:b,totalMonthlyBenefit:Math.round(R)};let v;if(m==="financed"){const o=S/100/12,g=w*12;let h=r/g;o>0&&(h=r*o*Math.pow(1+o,g)/(Math.pow(1+o,g)-1)),h=Math.round(h);const j=y.totalMonthlyBenefit-h;v={type:"financed",...y,emiDisplay:"Rs. "+h.toLocaleString(),netMonthlyDisplay:j>=0?"Rs. "+j.toLocaleString():"Rs. "+(-j).toLocaleString(),netPositive:j>=0}}else v={type:"cash",...y,savingsDisplay:"Rs. "+y.totalMonthlyBenefit.toLocaleString()};D(v)};return e.jsxs("div",{className:"max-w-lg md:max-w-2xl mx-auto relative px-4 py-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-center mb-4 text-gray-800",children:"Solar Package & Savings Calculator"}),e.jsx("p",{className:"text-center text-base md:text-lg text-gray-600 mb-10",children:"Net Accounting – 2025 CEB Export Tariffs"}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 md:p-8 space-y-8",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"bill",className:"block text-base md:text-lg font-semibold text-gray-700 mb-2",children:"Your Current Monthly Bill (LKR)"}),e.jsx("input",{type:"number",id:"bill",min:"5000",value:i,onChange:t=>L(parseFloat(t.target.value)||0),placeholder:"e.g. 5000",className:"w-full px-4 py-3 md:py-4 text-base md:text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition"})]}),e.jsxs("div",{className:"flex flex-col items-center border border-gray-200 p-4 rounded-lg",children:[e.jsx("label",{className:"text-base md:text-lg font-semibold text-gray-700 mb-4",children:"Connection Type"}),e.jsxs("div",{className:"flex items-center justify-center space-x-8",children:[e.jsx("span",{className:"text-lg font-medium text-gray-600",children:"Single Phase"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:f==="three",onChange:()=>B(f==="single"?"three":"single"),className:"sr-only peer"}),e.jsx("div",{className:"w-14 h-8 bg-blue-600 rounded-full peer peer-checked:bg-green-600 after:content-[''] after:absolute after:top-1 after:left-1 after:bg-white after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:after:translate-x-full"})]}),e.jsx("span",{className:"text-lg font-medium text-gray-600",children:"Three Phase"})]})]}),e.jsxs("div",{className:"flex flex-col items-center border border-gray-200 p-4 rounded-lg",children:[e.jsx("label",{className:"text-base md:text-lg font-semibold text-gray-700 mb-4",children:"Payment Option"}),e.jsxs("div",{className:"flex items-center justify-center space-x-8",children:[e.jsx("span",{className:"text-lg font-medium text-gray-600",children:"Cash"}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:m==="financed",onChange:()=>A(m==="cash"?"financed":"cash"),className:"sr-only peer"}),e.jsx("div",{className:"w-14 h-8 bg-gray-400 rounded-full peer peer-checked:bg-green-600 after:content-[''] after:absolute after:top-1 after:left-1 after:bg-white after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:after:translate-x-full"})]}),e.jsx("span",{className:"text-lg font-medium text-gray-600",children:"Financed / Loan"})]})]}),m==="financed"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"term",className:"block text-base md:text-lg font-semibold text-gray-700 mb-2",children:"Loan Term (Years)"}),e.jsxs("select",{id:"term",value:w,onChange:t=>F(parseInt(t.target.value)),className:"w-full px-4 py-3 md:py-4 text-base md:text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition",children:[e.jsx("option",{value:3,children:"3 Years"}),e.jsx("option",{value:5,children:"5 Years"}),e.jsx("option",{value:7,children:"7 Years"}),e.jsx("option",{value:10,children:"10 Years"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"rate",className:"block text-base md:text-lg font-semibold text-gray-700 mb-2",children:"Annual Interest Rate (%)"}),e.jsx("input",{type:"number",id:"rate",step:"0.1",value:S,onChange:t=>W(parseFloat(t.target.value)||0),placeholder:"e.g. 8.0",className:"w-full px-4 py-3 md:py-4 text-base md:text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent outline-none transition"})]})]}),e.jsx("button",{onClick:K,className:"w-full mt-8 py-4 md:py-5 bg-green-600 hover:bg-green-700 text-white font-bold text-lg md:text-xl rounded-lg shadow-md transition transform hover:scale-105",children:"Calculate Savings & Package"})]}),n&&e.jsxs("div",{className:"mt-12 bg-white rounded-2xl shadow-xl p-6 md:p-8 space-y-6",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-center text-gray-900",children:n.type==="financed"?"Financed Solar Package":"Cash Purchase Solar Package"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-5 text-center shadow-md",children:[e.jsx(l,{icon:H,className:"text-green-600 text-4xl mb-3"}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Connection Type"}),e.jsx("p",{className:"text-xl font-bold",children:n.phaseDisplay})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-5 text-center shadow-md",children:[e.jsx(l,{icon:J,className:"text-green-600 text-4xl mb-3"}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Estimated Consumption"}),e.jsx("p",{className:"text-xl font-bold",children:n.estimatedUnits})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-5 text-center shadow-md",children:[e.jsx(l,{icon:k,className:"text-green-600 text-4xl mb-3"}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Required System Size"}),e.jsx("p",{className:"text-xl font-bold",children:n.theoreticalKw})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-5 text-center shadow-md ring-2 ring-green-400",children:[e.jsx(l,{icon:k,className:"text-green-700 text-4xl mb-3"}),e.jsx("p",{className:"text-sm text-green-800 font-semibold",children:"Recommended Package"}),e.jsx("p",{className:"text-2xl font-bold text-green-800",children:n.recommendedPackage})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-5 text-center shadow-md",children:[e.jsx(l,{icon:k,className:"text-green-600 text-4xl mb-3"}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Avg Monthly Generation"}),e.jsx("p",{className:"text-xl font-bold",children:n.generation})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-5 text-center shadow-md ring-2 ring-green-400 md:col-span-3",children:[e.jsx(l,{icon:M,className:"text-green-700 text-4xl mb-3"}),e.jsx("p",{className:"text-sm text-green-800 font-semibold",children:"Monthly Net Income"}),e.jsx("p",{className:"text-3xl font-bold text-green-800",children:n.monthlyNetIncome}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"(Income from excess units exported to CEB)"})]}),m==="financed"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-5 text-center shadow-md",children:[e.jsx(l,{icon:M,className:"text-green-600 text-4xl mb-3"}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Monthly EMI"}),e.jsx("p",{className:"text-xl font-bold",children:n.emiDisplay})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-5 text-center shadow-md ring-2 ring-green-300 md:col-span-2",children:[e.jsx(l,{icon:M,className:"text-green-600 text-4xl mb-3"}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Net Monthly Cashflow"}),e.jsx("p",{className:`text-3xl font-bold ${n.netPositive?"text-green-700":"text-red-700"}`,children:n.netMonthlyDisplay}),e.jsx("p",{className:"text-sm text-gray-600 mt-2",children:n.netPositive?"Positive: You gain this amount each month after EMI":"Negative: Loan EMI exceeds solar benefit this month"})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-5 text-center shadow-md",children:[e.jsx(l,{icon:Q,className:"text-green-600 text-4xl mb-3"}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Estimated Payback Period"}),e.jsx("p",{className:"text-xl font-bold",children:n.paybackDisplay})]}),n.phaseNote&&e.jsxs("div",{className:"bg-orange-50 rounded-lg p-5 text-center shadow-md md:col-span-3",children:[e.jsx(l,{icon:V,className:"text-orange-600 text-4xl mb-3"}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Important Note"}),e.jsx("p",{className:"text-lg font-semibold text-orange-700",children:n.phaseNote})]})]})]}),e.jsxs("div",{className:"mt-12 bg-gray-100 rounded-2xl p-6 md:p-8 text-sm md:text-base text-gray-600",children:[e.jsx("strong",{className:"block mb-3 text-lg text-gray-800",children:"Real-World Assumptions (2025–2026):"}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 font-semibold",children:[e.jsx("li",{children:"CEB domestic tariff + fixed charges"}),e.jsx("li",{children:"Net Accounting: export payment for excess units"}),e.jsx("li",{children:"Export rates: 20.90 (<5 kW), 19.61 (5–20 kW), 17.46 (20–100 kW), etc."}),e.jsx("li",{children:"Generation: 125 units per 1kW (Western Province average)"}),e.jsx("li",{children:"Monthly Net Income = only export payment from excess units"}),e.jsx("li",{children:"Net Monthly Cashflow (financed) = Total benefit - EMI"}),e.jsx("li",{children:"Payback includes full benefit (bill reduction + export income)"})]}),e.jsx("p",{className:"mt-4 font-semibold text-red-700",children:"This is an estimate only. Actual tariffs, export rates, generation and billing may vary."})]})]})},re=()=>{const i=X();return e.jsx("main",{className:"min-h-screen bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("button",{onClick:()=>i("/solar-energy"),className:"mb-8 flex items-center gap-2 text-green-600 hover:text-green-800 font-medium text-lg transition",children:[e.jsx(l,{icon:Z}),"Back to Solar & Energy Systems"]}),e.jsx(se,{}),e.jsx("div",{className:"mt-12 text-center text-gray-600",children:e.jsxs("p",{className:"text-xl font-semibold mb-4",children:["Need personalized advice? ",e.jsx(ee,{to:"/contact",className:"text-green-600 hover:underline font-medium",children:"Contact us"})," for a free consultation."]})})]})})};export{re as default};
