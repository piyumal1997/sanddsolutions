import{j as e,r,F as f,h as S,i as E,f as L,L as I}from"./index-D2MYANsW.js";const $=({project:t,onClick:o})=>{const a=t.images.length>0?t.images[0]:"/placeholder.jpg";return e.jsxs("div",{onClick:o,className:"bg-white rounded-xl shadow-lg overflow-hidden cursor-pointer hover:shadow-2xl transition duration-300",children:[e.jsx("img",{src:a,alt:t.title,className:"w-full h-64 object-cover hover:scale-105 transition duration-500"}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-xl font-semibold mb-1",children:t.title}),e.jsx("p",{className:"text-md text-gray-800",children:t.description}),e.jsx("p",{className:"text-md text-green-600 mt-3 font-medium",children:t.type.replace("-"," ").toUpperCase()})]})]})},F=({project:t,onClose:o})=>{const[a,d]=r.useState(0),n=()=>{d(s=>s>0?s-1:t.images.length-1)},m=()=>{d(s=>s<t.images.length-1?s+1:0)},i=s=>{s.key==="ArrowLeft"&&n(),s.key==="ArrowRight"&&m(),s.key==="Escape"&&o()};return r.useEffect(()=>(document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)),[]),e.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 px-4 py-8 overflow-y-auto",onClick:o,role:"dialog","aria-modal":"true","aria-labelledby":"project-title",children:e.jsxs("div",{className:"bg-white rounded-2xl max-w-3xl w-full mx-auto relative shadow-2xl overflow-hidden flex flex-col",onClick:s=>s.stopPropagation(),children:[e.jsx("button",{onClick:o,className:"absolute top-3 right-3 text-gray-50 hover:text-gray-900 text-3xl transition-colors duration-200 z-10","aria-label":"Close modal",children:e.jsx(f,{icon:S})}),e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"overflow-hidden max-h-[80vh] rounded-t-2xl",children:e.jsx("img",{src:t.images[a]||"/placeholder.jpg",alt:`${t.title} - Image ${a+1}`,className:"w-full h-auto object-contain transition-opacity duration-300 ease-in-out"},a)}),t.images.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:n,className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-white/80 px-3 py-2 rounded-full hover:bg-white transition-all duration-200","aria-label":"Previous image",children:e.jsx(f,{icon:E})}),e.jsx("button",{onClick:m,className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-white/80 px-3 py-2 rounded-full hover:bg-white transition-all duration-200","aria-label":"Next image",children:e.jsx(f,{icon:L})}),e.jsx("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-2",children:t.images.map((s,c)=>e.jsx("button",{onClick:()=>d(c),className:`w-2 h-2 rounded-full transition-colors duration-200 ${c===a?"bg-green-900":"bg-gray-300"}`,"aria-label":`Go to image ${c+1}`},c))})]})]}),e.jsxs("div",{className:"p-6 text-center md:text-left flex-grow overflow-y-auto",children:[e.jsx("h2",{id:"project-title",className:"text-2xl font-bold text-green-900 mb-2",children:t.title}),e.jsx("p",{className:"text-lg text-gray-900 mb-1",children:t.description}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:t.details}),e.jsx("p",{className:"text-md font-semibold text-gray-900 mt-2",children:t.type.replace("-"," ").toUpperCase()})]})]})})},A="/assets/projects-bg-C3zS5Q13.jpg",U=()=>{const[t,o]=r.useState([]),[a,d]=r.useState(""),[n,m]=r.useState("all"),[i,s]=r.useState(1),[c,j]=r.useState(null),[N,b]=r.useState(!0),[y,w]=r.useState(null),h=6;r.useEffect(()=>{(async()=>{try{b(!0),w(null);let x="/api/projects";const u=new URLSearchParams;n!=="all"&&u.append("type",n),a.trim()&&u.append("search",a.trim()),u.toString()&&(x+=`?${u.toString()}`);const p=await fetch(x);if(!p.ok)throw new Error(`Failed to load projects: ${p.status}`);const P=await p.json();o(P||[])}catch(x){console.error("Error fetching projects:",x),w(x.message||"Could not load projects. Please try again later.")}finally{b(!1)}})()},[a,n]);const g=Math.ceil(t.length/h),v=i*h,k=v-h,C=t.slice(k,v);return r.useEffect(()=>{s(1)},[a,n]),e.jsxs("main",{className:"pt-0 bg-white",children:[e.jsxs("section",{className:"relative h-96 pt-0",children:[e.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-fixed",style:{backgroundImage:`url(${A})`}}),e.jsx("div",{className:"absolute inset-0 bg-black/50"}),e.jsx("div",{className:"relative container mx-auto px-6 h-full flex items-center justify-center text-center text-white",children:e.jsxs("div",{className:"max-w-5xl",children:[e.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-6 drop-shadow-2xl",children:"Our Projects"}),e.jsx("p",{className:"text-xl md:text-2xl max-w-3xl mx-auto drop-shadow-md",children:"Explore our completed installations and engineering achievements across Sri Lanka"})]})})]}),e.jsx("section",{className:"py-12 md:py-16 bg-gray-50",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end gap-6 md:gap-8",children:[e.jsxs("div",{className:"w-full md:flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search"}),e.jsx("input",{type:"text",placeholder:"Search by title or description...",value:a,onChange:l=>d(l.target.value),className:"w-full px-5 py-3.5 bg-white border border-gray-300 rounded-lg focus:border-green-600 focus:ring-1 focus:ring-green-600 focus:outline-none transition shadow-sm"})]}),e.jsxs("div",{className:"w-full md:w-64",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Project Type"}),e.jsxs("select",{value:n,onChange:l=>m(l.target.value),className:"w-full px-5 py-3.5 bg-white border border-gray-300 rounded-lg focus:border-green-600 focus:ring-1 focus:ring-green-600 focus:outline-none transition shadow-sm",children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"residential-solar",children:"Residential Solar"}),e.jsx("option",{value:"industrial-solar",children:"Industrial Solar"}),e.jsx("option",{value:"automation",children:"Automation"}),e.jsx("option",{value:"engineering",children:"Engineering"})]})]})]})})})}),e.jsx("section",{className:"py-16 md:py-20 bg-white",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:N?e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-4 border-green-600 mx-auto mb-4"}),e.jsx("p",{className:"text-xl text-gray-600",children:"Loading projects..."})]}):y?e.jsxs("div",{className:"text-center py-20 text-red-600",children:[e.jsx("p",{className:"text-xl font-medium",children:y}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-6 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Try Again"})]}):t.length===0?e.jsx("p",{className:"text-center text-xl text-gray-600 py-12",children:"No projects match your criteria."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 md:gap-10 max-w-7xl mx-auto",children:C.map(l=>e.jsx($,{project:l,onClick:()=>j(l)},l.id))}),g>1&&e.jsxs("div",{className:"flex justify-center items-center gap-6 md:gap-8 mt-12 md:mt-16",children:[e.jsx("button",{onClick:()=>s(l=>Math.max(l-1,1)),disabled:i===1,className:"px-6 md:px-8 py-3 md:py-4 bg-green-600 text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed hover:bg-green-700 transition",children:"Previous"}),e.jsxs("span",{className:"text-base md:text-lg font-medium text-gray-700",children:["Page ",i," of ",g]}),e.jsx("button",{onClick:()=>s(l=>Math.min(l+1,g)),disabled:i===g,className:"px-6 md:px-8 py-3 md:py-4 bg-green-600 text-white rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed hover:bg-green-700 transition",children:"Next"})]})]})})}),e.jsx("section",{className:"py-16 bg-gray-50",children:e.jsxs("div",{className:"container mx-auto px-6 text-center",children:[e.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-6 text-gray-900",children:"Interested in a Custom Solution?"}),e.jsx("p",{className:"text-xl text-gray-700 max-w-2xl mx-auto mb-8",children:"Contact us today for a free consultation on your next project."}),e.jsx(I,{to:"/contact",className:"inline-block bg-green-600 text-white px-8 py-4 rounded-full font-medium text-lg hover:bg-green-700 shadow-md transition",children:"Get in Touch"})]})}),c&&e.jsx(F,{project:c,onClose:()=>j(null)})]})};export{U as default};
